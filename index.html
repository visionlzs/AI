<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ—æ¶¦èŒï¼šä»Šæ™šçš„å¤„åˆ‘é‚€è¯·å‡½ (Final)</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #00f3ff; /* èµ›åšè“ */
            --danger: #ff003c;  /* è­¦å‘Šçº¢ */
            --warning: #fcee0a; /* æ•…éšœé»„ */
            --purple: #bc13fe;
            --bg: #050505;
            --panel: rgba(20, 20, 20, 0.92);
        }

        body {
            margin: 0;
            background-color: var(--bg);
            color: #fff;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
            padding-bottom: 80px;
        }

        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }
        .shake-screen { animation: shake 0.5s; }

        /* --- 0. ä¼ªè£…å±‚ --- */
        #intro-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
            background: #fff; color: #000; z-index: 9999;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            transition: transform 0.6s cubic-bezier(0.8, 0, 0.2, 1);
        }
        .official-badge { font-size: 4rem; color: #d4af37; margin-bottom: 20px; animation: float 3s ease-in-out infinite;}
        @keyframes float { 0%, 100% {transform: translateY(0);} 50% {transform: translateY(-10px);} }
        .start-btn { padding: 15px 40px; border: 2px solid #000; background: transparent; font-size: 1.2rem; cursor: pointer; transition: 0.3s; font-weight: bold;}
        .start-btn:hover { background: #000; color: #fff; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }

        /* --- ä¸»å†…å®¹ --- */
        .container { max-width: 800px; margin: 0 auto; padding: 20px; opacity: 0; transform: translateY(20px); transition: 1s; }
        
        .header-glitch { text-align: center; margin-bottom: 30px; }
        .header-glitch h1 { font-size: 2.2rem; color: var(--danger); text-transform: uppercase; letter-spacing: 2px; text-shadow: 3px 3px 0px rgba(0,243,255,0.3); margin: 0;}
        .header-glitch p { color: #666; font-family: monospace; margin-top: 5px; }

        .card {
            background: var(--panel); border: 1px solid #333; border-radius: 12px;
            padding: 20px; margin-bottom: 25px; position: relative; overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); backdrop-filter: blur(5px);
        }
        .card::before { content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: var(--primary); }
        .card.danger::before { background: var(--danger); }
        .card.fun::before { background: var(--purple); }
        .card h2 { margin-top: 0; font-size: 1.2rem; color: #eee; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid #333; padding-bottom: 10px;}
        
        /* çƒ­åŠ›å›¾ */
        .heatmap-container {
            position: relative; width: 100%; height: 200px; background: #1a2a3a;
            border-radius: 4px; overflow: hidden; margin-top: 15px;
            background-image: linear-gradient(#333 1px, transparent 1px), linear-gradient(90deg, #333 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .table-outline { width: 60%; height: 80%; border: 2px solid #fff; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .heat-zone { position: absolute; top: 5%; left: 5%; width: 90%; height: 90%; background: var(--danger); filter: blur(25px); opacity: 0.8; animation: pulse-red 2s infinite; border-radius: 50%;}
        @keyframes pulse-red { 0% {opacity: 0.6;} 50% {opacity: 0.9;} 100% {opacity: 0.6;} }

        /* è€è™æœº */
        .slot-machine { background: #000; border: 4px solid #333; border-radius: 8px; padding: 15px; text-align: center; }
        .slot-display { font-size: 1.5rem; color: var(--warning); font-weight: bold; min-height: 40px; margin-bottom: 15px; border-bottom: 1px dashed #555; padding-bottom: 10px; }
        .spin-btn { background: var(--purple); color: #fff; border: none; padding: 10px 25px; border-radius: 50px; font-weight: bold; cursor: pointer; box-shadow: 0 0 10px var(--purple); }
        .spin-btn:active { transform: scale(0.95); }

        /* å•†å“ */
        .shop-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .shop-item { background: #222; border: 1px solid #444; padding: 10px; text-align: center; border-radius: 8px; cursor: pointer; transition: 0.2s; }
        .shop-item.selected { border-color: var(--primary); background: rgba(0, 243, 255, 0.1); }
        .shop-icon { font-size: 2rem; margin-bottom: 5px; display: block; }
        .shop-name { font-size: 0.8rem; color: #ccc; }

        /* 3D æ¸¸æˆå®¹å™¨ */
        #game-wrapper { width: 100%; height: 350px; background: #000; position: relative; border: 1px solid #444; overflow: hidden;}
        #game-msg {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            color: var(--danger); font-size: 3rem; font-weight: 900; opacity: 0; pointer-events: none; white-space: nowrap;
            text-shadow: 0 0 10px #000; z-index: 20; transition: opacity 0.1s;
        }

        /* ç­¾å­— */
        .signature-pad { background: #fff; border-radius: 4px; cursor: crosshair; touch-action: none; width: 100%; height: 120px; display: block; }

        /* åº•éƒ¨ */
        .marquee-footer {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 40px;
            background: var(--danger); color: #fff; line-height: 40px;
            font-family: monospace; overflow: hidden; white-space: nowrap;
            z-index: 100; font-weight: bold; border-top: 2px solid #000;
        }
        .marquee-content { display: inline-block; padding-left: 100%; animation: scroll 20s linear infinite; }
        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }

        .btn { width: 100%; padding: 16px; border: none; border-radius: 6px; font-weight: bold; font-size: 1.1rem; text-transform: uppercase; cursor: pointer; margin-top: 10px;}
        .btn-submit { background: var(--primary); color: #000; box-shadow: 0 0 20px rgba(0, 243, 255, 0.4); }
        .btn-run { background: #333; color: #777; transition: 0.05s; position: relative;}

        .mock-toast {
            position: fixed; top: 30%; left: 50%; transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9); color: var(--danger); border: 2px solid var(--danger);
            padding: 20px; font-size: 2rem; font-weight: bold; z-index: 2000;
            display: none; white-space: nowrap;
        }
    </style>
    <script src="https://cdn.bootcdn.net/ajax/libs/three.js/0.146.0/three.min.js"></script>
</head>
<body>

<div id="intro-layer">
    <div class="official-badge"><i class="fas fa-hand-holding-medical"></i></div>
    <h2 style="margin:0">ç¤¾åŒºå…³çˆ±ä¸­å¿ƒ</h2>
    <h1 style="margin:10px 0">ä¹’ä¹“çƒå›°éš¾æˆ·å¸®æ‰¶è®¡åˆ’</h1>
    <p>å»ºæ¡£ç«‹å¡å¯¹è±¡ï¼šæ—æ¶¦èŒ</p>
    <button class="start-btn" onclick="enterSite()">æ¥å—æ´åŠ©</button>
</div>

<div id="toast" class="mock-toast">å¤ªèœäº†ï¼</div>

<div class="container" id="main-app">
    
    <div class="header-glitch">
        <h1>âš ï¸ å®åŠ›å·®è·ç¡®è®¤ä¹¦</h1>
        <p>MISSION: DESTROY LIN_RUNLONG | 20:00 TONIGHT</p>
    </div>

    <div class="card danger">
        <h2><i class="fas fa-crosshairs"></i> å¤§æ•°æ®åˆ†æï¼šä½ çš„é˜²å®ˆç›²åŒº</h2>
        <p>AI å·²æ¨¡æ‹Ÿäº† 1000 åœºæ¯”èµ›ï¼Œè¿™æ˜¯ä½ åœ¨çƒå°ä¸Šçš„â€œæ­»äº¡åŒºåŸŸâ€ï¼š</p>
        <div class="heatmap-container">
            <div class="table-outline"></div>
            <div class="heat-zone"></div>
            <div style="position: absolute; bottom: 5px; left: 5px; color: #fff; font-size: 0.7rem; font-family: monospace;">
                COVERAGE: 100% DEADLY
            </div>
        </div>
        <p style="font-size: 0.8rem; color: #999; margin-top: 5px; text-align: center;">(çº¢è‰²ä»£è¡¨ä½ æ¥ä¸åˆ°çƒçš„åŒºåŸŸï¼Œä¹Ÿå°±æ˜¯å…¨å°)</p>
    </div>

    <div class="card fun">
        <h2><i class="fas fa-dice"></i> èµ›åå€Ÿå£è‡ªåŠ¨ç”Ÿæˆå™¨</h2>
        <p>ä¸ºäº†é¿å…ä½ è¾“äº† 11:0 ä¹‹åå°´å°¬ï¼Œè¯·æå‰æŠ½å–ä½ çš„â€œè¾“çƒç†ç”±â€ï¼š</p>
        <div class="slot-machine">
            <div class="slot-display" id="excuse-text">???</div>
            <button class="spin-btn" onclick="spinExcuse()"><i class="fas fa-sync"></i> ç”Ÿæˆå€Ÿå£</button>
        </div>
    </div>

    <div class="card danger">
        <h2><i class="fas fa-gamepad"></i> VRä½“éªŒï¼šæ¥å‘çƒæ¨¡æ‹Ÿ</h2>
        <p>æ»‘åŠ¨å±å¹•æ§åˆ¶çƒæ‹ã€‚æ³¨æ„ï¼šçƒé€Ÿå·²æ”¾æ…¢ï¼Œå¦‚æœä½ è¿˜æ¥ä¸åˆ°ï¼Œé‚£å°±æ²¡æ•‘äº†ã€‚</p>
        <div id="game-wrapper"></div>
        <div id="game-msg">å¤ªæ…¢äº†!</div>
    </div>

    <div class="card">
        <h2><i class="fas fa-shopping-cart"></i> èµ›åå…³æ€€å¥—é¤ (è‡ªè´¹)</h2>
        <p>è¯·é€‰æ‹©ä½ è¢«æš´æ‰“ä¹‹åéœ€è¦çš„æœåŠ¡ï¼š</p>
        <div class="shop-grid">
            <div class="shop-item" onclick="selectItem(this)">
                <span class="shop-icon">ğŸ§»</span>
                <div class="shop-name">å¼ºåŠ›å¸æ°´çº¸å·¾<br>(æ“¦æ³ªä¸“ç”¨)</div>
            </div>
            <div class="shop-item" onclick="selectItem(this)">
                <span class="shop-icon">ğŸ’Š</span>
                <div class="shop-name">é€Ÿæ•ˆæ•‘å¿ƒä¸¸<br>(é˜²æ¯”åˆ†è¿‡å¤§)</div>
            </div>
            <div class="shop-item" onclick="selectItem(this)">
                <span class="shop-icon">ğŸš—</span>
                <div class="shop-name">æ»´æ»´ä»£é©¾<br>(è…¿è½¯å›ä¸å»)</div>
            </div>
            <div class="shop-item" onclick="selectItem(this)">
                <span class="shop-icon">ğŸ“–</span>
                <div class="shop-name">ã€Šä¹’ä¹“çƒå…¥é—¨ã€‹<br>(å»ºè®®é‡ä¿®)</div>
            </div>
        </div>
    </div>

    <div class="card" style="border-left-color: #fff;">
        <h2><i class="fas fa-file-contract"></i> ç­¾ç½²ã€Šè¢«è™å…è´£åè®®ã€‹</h2>
        <p>æœ¬äººè‡ªæ„¿æ¥å—ä»Šæ™šçš„æ¯’æ‰“ï¼Œä¸”æ‰¿è¯ºä¸å“­ä¸é—¹ã€‚</p>
        <canvas class="signature-pad" id="sig-pad"></canvas>
        <div style="display:flex; justify-content:space-between; margin-top:5px;">
            <span style="font-size:0.7rem; color:#666;">*æ³•å¾‹æ•ˆåŠ›ç­‰åŒäºå–èº«å¥‘</span>
            <button onclick="clearPad()" style="background:#333; color:#fff; border:none; padding:2px 10px; border-radius:4px;">é‡å†™</button>
        </div>
    </div>

    <div style="margin-top: 20px;">
        <button class="btn btn-submit" onclick="submitForm()">
            <i class="fas fa-skull"></i> ç¡®è®¤åº”æˆ˜ (20:00)
        </button>
        <button class="btn btn-run" id="run-btn" onclick="dodge(this)">
            å¤ªå¯æ€•äº†ï¼Œæˆ‘è¦é€€èµ›
        </button>
    </div>
</div>

<div class="marquee-footer">
    <div class="marquee-content">
        ğŸ“¢ çªå‘æ–°é—»ï¼šåšå½©å…¬å¸å·²å…³é—­â€œæ—æ¶¦èŒèƒœâ€çš„æŠ•æ³¨é€šé“ï¼ŒåŸå› æ˜¯â€œä¸å¯èƒ½å‘ç”Ÿçš„äº‹ä»¶â€ &nbsp;&nbsp;|&nbsp;&nbsp; 
        ğŸŒ¤ å¤©æ°”é¢„æŠ¥ï¼šçƒé¦†å±€éƒ¨åœ°åŒºå°†ä¸‹èµ·ä¹’ä¹“çƒé›¨ &nbsp;&nbsp;|&nbsp;&nbsp; 
        ğŸš‘ å‹æƒ…æç¤ºï¼šæ—å­èƒœçš„åæ‰‹å·²å®Œæˆå……èƒ½ &nbsp;&nbsp;|&nbsp;&nbsp; 
        ğŸ“‰ æ•°æ®æ›´æ–°ï¼šä½ çš„èƒœç‡ç¨³å®šåœ¨ 0.00%
    </div>
</div>

<script>
    // --- 0. è¿›åœº ---
    function enterSite() {
        document.getElementById('intro-layer').style.transform = 'translateY(-100%)';
        setTimeout(() => {
            document.getElementById('main-app').style.opacity = 1;
            document.getElementById('main-app').style.transform = 'translateY(0)';
            init3DGame();
        }, 500);
    }

    // --- 1. å˜²è®½ç³»ç»Ÿ ---
    function shakeAndMock(text) {
        document.body.classList.add('shake-screen');
        const toast = document.getElementById('toast');
        toast.innerText = text;
        toast.style.display = 'block';
        setTimeout(() => {
            document.body.classList.remove('shake-screen');
            toast.style.display = 'none';
        }, 1000);
    }

    // --- 2. è€è™æœº ---
    const excuses = ["åœ°å¤ªæ»‘äº†", "çƒå¤ªåœ†äº†", "ç¯å…‰å¤ªåˆºçœ¼", "çƒæ‹æ²¡ç²˜å¥½", "æ˜¨æ™šè½æ•äº†", "é£æ°´ä¸å¥½", "ä¸æƒ³èµ¢å¤ªæƒ¨", "è®©ä½ çš„", "æ—©é¥­æ²¡åƒé¥±", "çƒç½‘å¤ªé«˜äº†"];
    let spinning = false;
    function spinExcuse() {
        if(spinning) return;
        spinning = true;
        const display = document.getElementById('excuse-text');
        let count = 0;
        const interval = setInterval(() => {
            display.innerText = excuses[Math.floor(Math.random() * excuses.length)];
            count++;
            if(count > 15) {
                clearInterval(interval);
                spinning = false;
                shakeAndMock("å€Ÿå£ç”ŸæˆæˆåŠŸï¼");
                display.style.color = "#00f3ff";
            }
        }, 100);
    }

    // --- 3. è´­ç‰©è½¦ ---
    function selectItem(el) {
        document.querySelectorAll('.shop-item').forEach(item => item.classList.remove('selected'));
        el.classList.add('selected');
        shakeAndMock("å¾ˆæœ‰è‡ªçŸ¥ä¹‹æ˜ï¼");
    }

    // --- 4. é€ƒé€¸æŒ‰é’® ---
    function dodge(btn) {
        const x = (Math.random() - 0.5) * 200;
        const y = (Math.random() - 0.5) * 100;
        btn.style.transform = `translate(${x}px, ${y}px)`;
        btn.style.background = "#550000";
        btn.innerText = "æƒ³å¾—ç¾ å˜»å˜»";
    }

    // --- 5. ç­¾å­— ---
    const canvas = document.getElementById('sig-pad');
    const ctx = canvas.getContext('2d');
    let isDrawing = false;
    function resizeCanvas() {
        const ratio = Math.max(window.devicePixelRatio || 1, 1);
        canvas.width = canvas.offsetWidth * ratio;
        canvas.height = canvas.offsetHeight * ratio;
        ctx.scale(ratio, ratio);
        ctx.strokeStyle = "#000";
        ctx.lineWidth = 3;
    }
    setTimeout(resizeCanvas, 500);

    function getPos(e) {
        const rect = canvas.getBoundingClientRect();
        const clientX = e.touches ? e.touches[0].clientX : e.clientX;
        const clientY = e.touches ? e.touches[0].clientY : e.clientY;
        return { x: clientX - rect.left, y: clientY - rect.top };
    }
    ['mousedown', 'touchstart'].forEach(ev => {
        canvas.addEventListener(ev, (e) => { isDrawing = true; ctx.beginPath(); ctx.moveTo(getPos(e).x, getPos(e).y); e.preventDefault(); }, {passive:false});
    });
    ['mousemove', 'touchmove'].forEach(ev => {
        canvas.addEventListener(ev, (e) => { if(isDrawing) { ctx.lineTo(getPos(e).x, getPos(e).y); ctx.stroke(); } e.preventDefault(); }, {passive:false});
    });
    ['mouseup', 'touchend'].forEach(ev => canvas.addEventListener(ev, () => isDrawing = false));
    function clearPad() { ctx.clearRect(0, 0, canvas.width, canvas.height); resizeCanvas(); }

    function submitForm() { alert("é¢„çº¦æˆåŠŸï¼\n\nVIP æ‹…æ¶å·²å°±ä½ã€‚\nä»Šæ™š 20:00ï¼Œä¸è§ä¸æ•£ï¼"); }

    // --- 6. 3D æ¸¸æˆ (ä¿®æ­£ç‰©ç†å¼•æ“ç‰ˆ) ---
    function init3DGame() {
        const container = document.getElementById('game-wrapper');
        const scene = new THREE.Scene();
        scene.fog = new THREE.Fog(0x000000, 1, 15);
        
        // è°ƒæ•´ç›¸æœºè§’åº¦ï¼Œä¿¯è§†ä¸€ç‚¹ï¼Œçœ‹æ¸…æ¡Œé¢
        const camera = new THREE.PerspectiveCamera(50, container.clientWidth/container.clientHeight, 0.1, 100);
        camera.position.set(0, 2.5, 4.5); 
        camera.lookAt(0, 0, 0);

        const renderer = new THREE.WebGLRenderer({antialias: true});
        renderer.setSize(container.clientWidth, container.clientHeight);
        container.appendChild(renderer.domElement);

        // ç¯å…‰
        const light = new THREE.PointLight(0xffffff, 1.2, 20);
        light.position.set(0, 5, 2);
        scene.add(light);
        scene.add(new THREE.AmbientLight(0x404040));

        // è“è‰²åœ°æ¿ç½‘æ ¼
        scene.add(new THREE.GridHelper(30, 30, 0x111111, 0x050505));
        
        // çƒæ¡Œ (æ·±è“è‰²å°é¢)
        const tableGeo = new THREE.BoxGeometry(3, 0.15, 5.4); // æ ‡å‡†æ¯”ä¾‹
        const tableMat = new THREE.MeshPhongMaterial({color: 0x1E3F5A, specular: 0x111111});
        const table = new THREE.Mesh(tableGeo, tableMat);
        table.position.y = -0.1; // æ¡Œé¢åœ¨ y=0 é™„è¿‘
        scene.add(table);

        // çƒç½‘
        const netGeo = new THREE.PlaneGeometry(3.2, 0.3);
        const netMat = new THREE.MeshBasicMaterial({color: 0xffffff, side: THREE.DoubleSide, transparent:true, opacity: 0.5});
        const net = new THREE.Mesh(netGeo, netMat);
        net.position.set(0, 0.2, 0);
        scene.add(net);

        // çƒæ‹ (ç©å®¶æ§åˆ¶)
        const paddle = new THREE.Mesh(new THREE.BoxGeometry(0.6, 0.6, 0.1), new THREE.MeshBasicMaterial({color: 0x00f3ff, transparent:true, opacity:0.6}));
        paddle.position.set(0, 0.3, 2.7); // åœ¨è¿‘ç«¯
        scene.add(paddle);

        // ä¹’ä¹“çƒ
        const ball = new THREE.Mesh(new THREE.SphereGeometry(0.08), new THREE.MeshBasicMaterial({color: 0xffff00}));
        scene.add(ball);

        let ballVel = new THREE.Vector3(0,0,0);
        let active = true;

        function resetBall() {
            // çƒä»å¯¹é¢å‘è¿‡æ¥
            ball.position.set(0, 0.5, -2.5);
            // é€Ÿåº¦ Z: å‘æ­£æ–¹å‘é£(é£å‘ç©å®¶)
            // é€Ÿåº¦ Y: å¾®å¾®å‘ä¸Šå‘çƒï¼Œç„¶åå—é‡åŠ›ä¸‹è½
            ballVel.set((Math.random()-0.5)*0.06, 0.05, 0.12); 
        }
        resetBall();

        // æ§åˆ¶é€»è¾‘
        function updatePaddle(clientX) {
            const rect = container.getBoundingClientRect();
            const x = ((clientX - rect.left) / rect.width * 2 - 1);
            paddle.position.x = x * 2; // é™åˆ¶èŒƒå›´
        }
        container.addEventListener('touchmove', (e) => { e.preventDefault(); updatePaddle(e.touches[0].clientX); }, {passive:false});
        container.addEventListener('mousemove', (e) => { updatePaddle(e.clientX); });

        function animate() {
            requestAnimationFrame(animate);
            
            if(active) {
                // 1. ä½ç½®æ›´æ–°
                ball.position.add(ballVel);
                
                // 2. é‡åŠ›æ¨¡æ‹Ÿ (å…³é”®ä¿®æ­£ï¼šå¿…é¡»è®©çƒå¾€ä¸‹æ‰)
                ballVel.y -= 0.003; 

                // 3. æ¡Œé¢åå¼¹é€»è¾‘
                // å¦‚æœçƒçš„é«˜åº¦ä½äºæ¡Œé¢(y=0)ï¼Œä¸”åœ¨æ¡Œå­èŒƒå›´å†…
                if(ball.position.y < 0 && Math.abs(ball.position.z) < 2.7) {
                    ball.position.y = 0; // ä¿®æ­£ä½ç½®é˜²ç©¿æ¨¡
                    ballVel.y = Math.abs(ballVel.y) * 0.85; // å¼¹èµ·ï¼ŒæŸè€—ä¸€ç‚¹èƒ½é‡
                }

                // 4. æ ¸å¿ƒç©æ³•ï¼šèº²é¿çƒæ‹ (å˜²è®½é€»è¾‘)
                // å½“çƒæ¥è¿‘æ‹å­æ‰€åœ¨çš„ Z è½´ (2.7å·¦å³)
                if(ball.position.z > 2.0 && ball.position.z < 3.0) {
                    const dist = Math.abs(ball.position.x - paddle.position.x);
                    if(dist < 0.5) { // å¦‚æœå¿«ç¢°åˆ°äº†
                        // å¼ºåˆ¶å˜å‘èº²å¼€
                        if (ball.position.x > paddle.position.x) ball.position.x += 0.5;
                        else ball.position.x -= 0.5;
                        
                        // æ˜¾ç¤ºå˜²è®½å­—
                        const msg = document.getElementById('game-msg');
                        const texts = ["å¤ªæ…¢äº†!", "ç©ºæ°”çƒ?", "å°±è¿™?", "MISS", "è€å¹´æ‰‹é€Ÿ"];
                        msg.innerText = texts[Math.floor(Math.random()*texts.length)];
                        msg.style.opacity = 1; 
                        setTimeout(()=> msg.style.opacity=0, 600);
                    }
                }

                // 5. å‡ºç•Œé‡ç½®
                if(ball.position.z > 4.5 || ball.position.y < -2) {
                    resetBall();
                }
            }
            renderer.render(scene, camera);
        }
        animate();
    }
</script>

</body>
</html>